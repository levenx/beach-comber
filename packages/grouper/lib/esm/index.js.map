{"version":3,"file":"index.js","sources":["../../src/components/preview/index.tsx","../../src/index.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport classnames from 'classnames';\nimport { marked } from 'marked';\nimport './index.less';\n\ninterface PreviewProps {\n    onClose: () => void;\n    title: string;\n    content: string;\n}\n\nexport default function Preview(props: PreviewProps) {\n    const { onClose, title, content } = props;\n    const [visible, setVisible] = useState(false);\n\n    useEffect(() => {\n        setTimeout(() => {\n            setVisible(true);\n        }, 0);\n    }, [])\n\n    const article = useMemo(() => {\n        return marked(content)\n    }, [content]);\n\n    return (\n        <div className={classnames(\"grouper-preview\", { \"grouper-preview--visible\": visible })}>\n            <div className=\"grouper-preview__title\">\n                <span className=\"title\">{title}</span>\n                <span className=\"close\" onClick={() => {\n                    setVisible(false);\n                    setTimeout(() => {\n                        onClose()\n                    }, 300);\n                }}>x</span>\n            </div>\n            <div className=\"grouper-preview__content\" dangerouslySetInnerHTML={{ __html: article }} />\n        </div>\n    )\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Preview from '@/components/preview';\n\nexport interface GrouperDocConfig {\n    root?: HTMLElement;\n    title?: string;\n    content?: string;\n}\n\nexport default class GrouperDoc {\n\n    config;\n\n    root;\n\n    constructor(config: GrouperDocConfig) {\n        this.config = config;\n    }\n\n    destory() {\n        ReactDOM.unmountComponentAtNode(this.root);\n    }\n\n    render(config: GrouperDocConfig) {\n        const { title, content, root } = config;\n        let div = root;\n        if (!root) {\n            div = document.createElement('div');\n            document.body.appendChild(div);\n        }\n        this.root = div;\n        const App = <Preview onClose={this.destory.bind(this)} title={title} content={content} />;\n        ReactDOM.render(App, div)\n    }\n\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;SAWwB,OAAO,CAAC,KAAmB;IACvC,IAAA,OAAO,GAAqB,KAAK,QAA1B,EAAE,KAAK,GAAc,KAAK,MAAnB,EAAE,OAAO,GAAK,KAAK,QAAV,CAAW;IACpC,IAAA,KAAwB,QAAQ,CAAC,KAAK,CAAC,EAAtC,OAAO,QAAA,EAAE,UAAU,QAAmB,CAAC;IAE9C,SAAS,CAAC;QACN,UAAU,CAAC;YACP,UAAU,CAAC,IAAI,CAAC,CAAC;SACpB,EAAE,CAAC,CAAC,CAAC;KACT,EAAE,EAAE,CAAC,CAAA;IAEN,IAAM,OAAO,GAAG,OAAO,CAAC;QACpB,OAAO,MAAM,CAAC,OAAO,CAAC,CAAA;KACzB,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;IAEd,QACI,6BAAK,SAAS,EAAE,UAAU,CAAC,iBAAiB,EAAE,EAAE,0BAA0B,EAAE,OAAO,EAAE,CAAC;QAClF,6BAAK,SAAS,EAAC,wBAAwB;YACnC,8BAAM,SAAS,EAAC,OAAO,IAAE,KAAK,CAAQ;YACtC,8BAAM,SAAS,EAAC,OAAO,EAAC,OAAO,EAAE;oBAC7B,UAAU,CAAC,KAAK,CAAC,CAAC;oBAClB,UAAU,CAAC;wBACP,OAAO,EAAE,CAAA;qBACZ,EAAE,GAAG,CAAC,CAAC;iBACX,QAAU,CACT;QACN,6BAAK,SAAS,EAAC,0BAA0B,EAAC,uBAAuB,EAAE,EAAE,MAAM,EAAE,OAAO,EAAE,GAAI,CACxF,EACT;AACL;;;ICvBI,oBAAY,MAAwB;QAChC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;KACxB;IAED,4BAAO,GAAP;QACI,QAAQ,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAC9C;IAED,2BAAM,GAAN,UAAO,MAAwB;QACnB,IAAA,KAAK,GAAoB,MAAM,MAA1B,EAAE,OAAO,GAAW,MAAM,QAAjB,EAAE,IAAI,GAAK,MAAM,KAAX,CAAY;QACxC,IAAI,GAAG,GAAG,IAAI,CAAC;QACf,IAAI,CAAC,IAAI,EAAE;YACP,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YACpC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;SAClC;QACD,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;QAChB,IAAM,GAAG,GAAG,oBAAC,OAAO,IAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,GAAI,CAAC;QAC1F,QAAQ,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,CAAA;KAC5B;IAEL,iBAAC;AAAD,CAAC;;;;"}